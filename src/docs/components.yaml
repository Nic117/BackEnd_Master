components:
  schemas:
    
    Product:
      type: object
      properties:
        _id:
          type: string
          description: ID de MongoDB
        title:
          type: string
          description: Nombre del producto
        description:
          type: string
          description: Descripción del producto
        price: 
          type: number
          description: Precio del producto
        thumbnail:
          type: array
          items:
            type: string
          description: URL de las imágenes del producto
        code:
          type: string
          description: Código único del producto
        stock:
          type: number
          description: Stock disponible
        category:
          type: string
          description: Categoría del producto (iPhone, MacBook, iPad)
        owner:
          type: string
          description: Propietario del producto
        status:
          type: boolean
          description: Estado del producto (activo o inactivo)
        __v: 
          type: string
          description: Versión del documento en MongoDB
        createdAt:  
          type: date-time
          description: Fecha de creación del producto
        updatedAt:
          type: date-time
          description: Última actualización del producto
      example:
        _id: "6635a4359a91d1aaa6e1fb62"
        title: "iPhone 14 Pro Max"
        description: "El iPhone 14 Pro Max cuenta con una pantalla Super Retina XDR de 6.7 pulgadas, chip A16 Bionic, triple cámara con tecnología ProRAW y ProRes, y 5G. Disponible en colores exclusivos como el morado profundo y dorado."
        price: 145000
        thumbnail: ["https://www.apple.com/iphone-14-pro-max.jpg"]
        code: "IPH14PMX"
        stock: 10
        category: "iPhone"
        owner: "admin"
        status: true
        __v: 0
        createdAt: "2024-05-04T02:57:57.213Z"
        updatedAt: "2024-06-25T23:25:08.867Z"

    updateProduct:
      type: object
      properties:
        title:
          type: string
          description: Nombre del producto
        description:
          type: string
          description: Descripción del producto
        price:
          type: number
          description: Precio del producto
        thumbnails:
          type: array
          items:
            type: string
          description: URLs de las imágenes del producto
        code:
          type: string
          description: Código del producto
        stock:
          type: number
          description: Stock disponible del producto
        category:
          type: string
          description: Categoría del producto (iPhone, MacBook, iPad)
        status:
          type: boolean
          description: Estado del producto
        owner:
          type: string
          description: Propietario del producto
      example:
        _id: "6635a4359a91d1aaa6e1fb62"
        title: "MacBook Pro M1"
        description: "La MacBook Pro con chip M1 ofrece un rendimiento sin precedentes en edición de video, diseño gráfico y programación. Pantalla Retina de 13 pulgadas, hasta 20 horas de batería y un sistema de enfriamiento avanzado."
        price: 250000
        thumbnail: ["https://www.apple.com/macbook-pro-m1.jpg"]
        code: "MACPM1"
        stock: 15
        category: "MacBook"
        owner: "admin"
        status: true
        __v: 0
        createdAt: "2024-05-04T02:57:57.213Z"
        updatedAt: "2024-06-25T23:25:08.867Z"

    Cart:
      type: object
      properties:
        _id:
          type: string
          description: ID de MongoDB
        products:
          type: array
          items:
            $ref: "#/components/schemas/CartProducts"
        __v:
          type: number
          description: Versión del documento en MongoDB
        createdAt:  
          type: date-time
          description: Fecha de creación del carrito
        updatedAt:
          type: date-time
          description: Fecha de última actualización del carrito
      example:
        _id: 66352f1c2ffc6c230910172b
        products:
          - product:
              _id: 6635a4359a91d1aaa6e1fb4a
              status: true
              title: "iPad Pro 12.9'' 2024"
              description: "El iPad Pro de 12.9 pulgadas incluye una pantalla Liquid Retina XDR, procesador M2, y soporte para Apple Pencil 2, haciendo de este dispositivo una potente herramienta de productividad y creatividad."
              price: 180000
              thumbnail: [https://www.apple.com/ipad-pro.jpg]
              code: "IPADPRO12"
              stock: 5
              category: "iPad"
              owner: "admin"
              __v: 0
              createdAt: "2024-05-04T02:57:57.212Z"
              updatedAt: "2024-05-04T02:57:57.212Z"
            quantity: 2
            _id: 663bd849ea339a4f825d19c6
        createdAt: 2024-05-03T18:38:20.276Z
        updatedAt: 2024-05-08T20:19:25.722Z
        __v: 1
    
    CartProducts:
      type: object
      properties:
        product:
          $ref: "#/components/schemas/Product"
        quantity:
          type: number
          description: Cantidad de unidades del producto en el carrito
        _id:
          type: string
          description: ID de MongoDB
    
    Ticket:
      type: object
      properties:
        _id:
          type: string
          description: ID de MongoDB
        code:
          type: string
          description: Código de la orden de compra
        purchase_datetime:
          type: string
          description: Fecha de la compra
          format: date-time
        amount:
          type: number
          description: Monto total de la compra
        purchaser:
          type: string
          description: Email del comprador
        products:
          type: array
          items:
            $ref: "#/components/schemas/TicketProducts"
      example:
        _id: "66aadd93047a2105f378bfc5"
        code: "T-1722473875445-cs7mbya"
        purchaseDateTime: "2024-08-01T00:57:55.445Z"
        amount: 310000
        purchaser: "juanperez@icloud.com"
        products:
          - _id: "660725f2d49ab55bf9c00da3"
            quantity: 1
            name: "MacBook Air M2"

    TicketProducts:
      type: object
      properties:
        _id:
          type: string
          description: ID de MongoDB
        quantity:
          type: number
          description: Cantidad de unidades del producto en el ticket
        title:
          type: string
          description: Nombre del producto en el ticket
        price:
          type: number
          description: Precio del producto en el ticket
        subtotal:
          type: number
          description: Subtotal del ticket
    
    response400:
      type: object
      properties:
        code:
          type: string
          example: "BAD_REQUEST_ERROR"
        message:
          type: string
          example: "El id o alguna propiedad especificada no son válidos"

    response401:
      type: object
      properties:
        code:
          type: string
          example: "UNAUTHORIZED_ERROR"
        message:
          type: string
          example: "No se pudo autenticar al usuario"

    response403:
      type: object
      properties:
        code:
          type: string
          example: "FORBIDDEN_ERROR"
        message:
          type: string
          example: "No tienes permiso para actualizar este producto/carrito"

    response404:
      type: object
      properties:
        code:
          type: string
          example: "NOT_FOUND_ERROR"
        message:
          type: string
          example: "Producto con ID {pid} no encontrado / Carrito con ID {cid} no encontrado"

    response500:
      type: object
      properties:
        code:
          type: string
          example: "INTERNAL_SERVER_ERROR"
        message:
          type: string
          example: "Error interno del servidor"
      
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: codercookie
